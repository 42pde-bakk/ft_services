# Global vars
[global_tags]
  user = "${INFLUX_USER}"

[agent]
  ## Default data collection interval for all inputs
  interval = "10s"

  ## true Rounds collection interval to 'interval'
  ## ie, if interval="10s" then always collect on :00, :10, :20, etc.
  round_interval = true

  ## Telegraf will send metrics to outputs in batches of at most
  ## metric_batch_size metrics.
  metric_batch_size = 1000

  ## For failed writes, telegraf will cache metric_buffer_limit metrics for each
  ## output, and will flush this buffer on a successful write.
  metric_buffer_limit = 10000

  ## Default flushing interval for all outputs.
  flush_interval = "10s"
# Read metrics about docker containers
[[inputs.docker]]
  endpoint = "unix:///var/run/docker.sock"
  gather_services = false
  container_names = []
  source_tag = false
  container_name_include = []
  container_name_exclude = []
  # container_state_include = []
  # container_state_exclude = []
  timeout = "5s"
  perdevice = true
  total = false
  docker_label_include = []
  docker_label_exclude = []
  tag_env = ["JAVA_HOME", "HEAP_SIZE"]
  # tls_ca = "/etc/telegraf/ca.pem"
  # tls_cert = "/etc/telegraf/cert.pem"
  # tls_key = "/etc/telegraf/key.pem"
  insecure_skip_verify = true

# metrics to influx
[[outputs.influxdb]]
	urls = ["${INFLUX_URL}"]
	skip_database_creation = ${INFLUX_SKIP_DATABASE_CREATION}
  	password = "${INFLUX_PASSWORD}"
	database = "telegraf"